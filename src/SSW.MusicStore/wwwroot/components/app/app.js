var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") return Reflect.decorate(decorators, target, key, desc);
    switch (arguments.length) {
        case 2: return decorators.reduceRight(function(o, d) { return (d && d(o)) || o; }, target);
        case 3: return decorators.reduceRight(function(o, d) { return (d && d(target, key)), void 0; }, void 0);
        case 4: return decorators.reduceRight(function(o, d) { return (d && d(target, key, o)) || o; }, desc);
    }
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var angular2_1 = require('angular2/angular2');
var router_1 = require('angular2/router');
var router_2 = require('angular2/router');
var route_config_1 = require('../../route.config');
var genre_service_1 = require('../../services/genre.service');
var AppComponent = (function () {
    function AppComponent(_genreService, _router) {
        this._genreService = _genreService;
        this._router = _router;
        this.title = 'SSW Angular 2 Music Store';
        this.routes = route_config_1.Routes;
        this.lock = new Auth0Lock('ikMjOLanjOske624faAjYe0Ve7cAOg33', 'ssw.au.auth0.com');
        this.getGenres();
        this.setUser();
    }
    AppComponent.prototype.setUser = function () {
        this.user = JSON.parse(localStorage.getItem('user'));
        console.log(this.user);
    };
    AppComponent.prototype.getGenres = function () {
        var _this = this;
        this.genres = [];
        this._genreService.getGenres()
            .then(function (genres) { return _this.genres = genres; });
        return this.genres;
    };
    AppComponent.prototype.goToGenre = function (genre) {
        this._router.navigate([("/" + route_config_1.Routes.genre.as), { name: genre.name }]);
    };
    AppComponent.prototype.login = function () {
        var _this = this;
        this.lock.show({
            focusInput: false,
            popup: true,
        }, function (err, profile, token) {
            _this.user = profile;
            if (err)
                console.log('login error:', err);
            if (token)
                localStorage.setItem('jwt', token);
            if (profile)
                localStorage.setItem('user', JSON.stringify(profile));
        });
    };
    AppComponent.prototype.register = function () {
        ///callback and error function
        // TODO route or login on register
        this.lock.showSignup(null, function (err) {
            console.log(err);
        });
    };
    AppComponent.prototype.logout = function () {
        this.user = null;
        localStorage.removeItem('user');
        localStorage.removeItem('jwt');
        //needed to hide img in menu as hidden is not working
        location.reload();
    };
    AppComponent = __decorate([
        angular2_1.Component({
            selector: 'app',
            template: "\n      <div class=\"navbar-collapse collapse inverse\" id=\"navbar-header\">\n      \t<div class=\"container-fluid\">\n      \t\t<div class=\"about\">\n      \t\t\t<h4>About</h4>\n      \t\t\t<p class=\"text-muted\">\n      \t\t\t\tThis is the Angular 2 version of the classic ASP.NET MVC Music store rewritten with ASP.NET5, Angular 2, BootStrap 4 and the SSW Enterprise way.\n      \t\t\t</p>\n      \t\t</div>\n      \t\t<div class=\"\">\n      \t\t\t<h4>Contact</h4>\n      \t\t\t<ul class=\"list-unstyled\">\n      \t\t\t\t<li><a href=\"https://github.com/SSWConsulting/angularmusicstore\">SSW Angular2 Music Store &copy; </a></li>\n      \t\t\t</ul>\n      \t\t</div>\n      \t</div>\n      </div>\n      <div class=\"navbar navbar-dark bg-inverse navbar-static-top\">\n      \t<div class=\"container-fluid\">\n      \t\t<button class=\"navbar-toggler pull-left\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbar-header\">\n      \t\t\t&#9776;\n      \t\t</button>\n      \t\t<a [router-link]=\"['/' + routes.dashboard.as]\" class=\"navbar-brand\">{{title}}</a>\n      \t\t<ul class=\"nav navbar-nav\">\n      \t\t\t<li class=\"nav-item\">\n      \t\t\t\t<div class=\"btn-group\">\n      \t\t\t\t\t<button type=\"button\" class=\"btn menu-dropdown dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n      \t\t\t\t\t\tGenre\n      \t\t\t\t\t</button>\n      \t\t\t\t\t<div class=\"dropdown-menu\">\n      \t\t\t\t\t\t<a class=\"dropdown-item\"\n      \t\t\t\t\t\t   (click)=\"goToGenre(genre)\"\n      \t\t\t\t\t\t   *ng-for=\"#genre of genres\">\n      \t\t\t\t\t\t\t{{genre.name}}\n      \t\t\t\t\t\t</a>\n      \t\t\t\t\t\t<div class=\"dropdown-divider\"></div>\n      \t\t\t\t\t\t<a class=\"dropdown-item\" [router-link]=\"['/' + routes.genres.as]\">Genre List</a>\n      \t\t\t\t\t</div>\n      \t\t\t\t</div>\n      \t\t\t</li>\n      \t\t\t<li class=\"nav-item\">\n      \t\t\t<a class=\"nav-link\" [hidden]=\"!user\" [router-link]=\"['/' + routes.genres.as]\">Cart</a>\n      \t\t\t</li>\n      \t\t\t<li class=\"nav-item pull-right\" [hidden]=\"user\">\n      \t\t\t\t<a class=\"nav-link\" (click)=\"register()\">Register</a>\n      \t\t\t</li>\n      \t\t\t<li class=\"nav-item pull-right\">\n      \t\t\t\t<a class=\"nav-link\"  [hidden]=\"user\" (click)=\"login()\">Login</a>\n      \t\t\t</li>\n      \t\t\t<li class=\"nav-item pull-right\" [hidden]=\"!user\">\n      \t\t\t\t<a class=\"nav-link\"  (click)=\"logout()\">Logout</a>\n      \t\t\t</li>\n      \t\t\t<li class=\"nav-item pull-right\" [hidden]=\"!user\">\n      \t\t\t\t<a class=\"nav-link\" >{{user.nickname}}</a>\n      \t\t\t</li>\n      \t\t\t<li class=\"nav-item pull-right\"  [hidden]=\"!user\">\n      \t\t\t\t<img [src]=\"user.picture\" class=\"img-responsive\" height=\"35\" width=\"35\">\n      \t\t\t</li>\n      \t\t</ul>\n      \t</div>\n      </div>\n      \t<router-outlet></router-outlet>\n      <footer class=\"text-muted\">\n      \t<div class=\"container\">\n      \t\t<p class=\"pull-right\">\n      \t\t\t<a href=\"#\">Back to top</a>\n      \t\t</p>\n      \t\t<p><a href=\"https://github.com/SSWConsulting/angularmusicstore\">SSW Angular2 Music Store &copy; </a></p>\n      \t</div>\n      </footer>\n    ",
            styles: ["\n\n      .btn-group > .menu-dropdown {\n      \tbackground-color: transparent;\n      }\n    "],
            directives: [router_1.ROUTER_DIRECTIVES, angular2_1.CORE_DIRECTIVES]
        }),
        router_1.RouteConfig(route_config_1.APP_ROUTES), 
        __metadata('design:paramtypes', [genre_service_1.GenreService, router_2.Router])
    ], AppComponent);
    return AppComponent;
})();
exports.AppComponent = AppComponent;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYXBwL2FwcC50cyJdLCJuYW1lcyI6WyJBcHBDb21wb25lbnQiLCJBcHBDb21wb25lbnQuY29uc3RydWN0b3IiLCJBcHBDb21wb25lbnQuc2V0VXNlciIsIkFwcENvbXBvbmVudC5nZXRHZW5yZXMiLCJBcHBDb21wb25lbnQuZ29Ub0dlbnJlIiwiQXBwQ29tcG9uZW50LmxvZ2luIiwiQXBwQ29tcG9uZW50LnJlZ2lzdGVyIiwiQXBwQ29tcG9uZW50LmxvZ291dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSx5QkFBeUMsbUJBQW1CLENBQUMsQ0FBQTtBQUM3RCx1QkFBNkMsaUJBQWlCLENBQUMsQ0FBQTtBQUMvRCx1QkFBcUIsaUJBQWlCLENBQUMsQ0FBQTtBQUN2Qyw2QkFBaUMsb0JBQW9CLENBQUMsQ0FBQTtBQUN0RCw4QkFBMkIsOEJBQThCLENBQUMsQ0FBQTtBQUcxRDtJQTJGSUEsc0JBQW9CQSxhQUEyQkEsRUFBVUEsT0FBZUE7UUFBcERDLGtCQUFhQSxHQUFiQSxhQUFhQSxDQUFjQTtRQUFVQSxZQUFPQSxHQUFQQSxPQUFPQSxDQUFRQTtRQVBqRUEsVUFBS0EsR0FBR0EsMkJBQTJCQSxDQUFDQTtRQUNwQ0EsV0FBTUEsR0FBR0EscUJBQU1BLENBQUNBO1FBSWZBLFNBQUlBLEdBQUdBLElBQUlBLFNBQVNBLENBQUNBLGtDQUFrQ0EsRUFBRUEsa0JBQWtCQSxDQUFDQSxDQUFDQTtRQUdqRkEsSUFBSUEsQ0FBQ0EsU0FBU0EsRUFBRUEsQ0FBQ0E7UUFDakJBLElBQUlBLENBQUNBLE9BQU9BLEVBQUVBLENBQUNBO0lBQ25CQSxDQUFDQTtJQUVERCw4QkFBT0EsR0FBUEE7UUFDSUUsSUFBSUEsQ0FBQ0EsSUFBSUEsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsWUFBWUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDckRBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNB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L2FwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBDT1JFX0RJUkVDVElWRVN9IGZyb20gJ2FuZ3VsYXIyL2FuZ3VsYXIyJztcbmltcG9ydCB7Um91dGVDb25maWcsIFJPVVRFUl9ESVJFQ1RJVkVTfSBmcm9tICdhbmd1bGFyMi9yb3V0ZXInO1xuaW1wb3J0IHtSb3V0ZXJ9IGZyb20gJ2FuZ3VsYXIyL3JvdXRlcic7XG5pbXBvcnQge1JvdXRlcywgQVBQX1JPVVRFU30gZnJvbSAnLi4vLi4vcm91dGUuY29uZmlnJztcbmltcG9ydCB7R2VucmVTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9nZW5yZS5zZXJ2aWNlJztcbmltcG9ydCB7R2VucmUsIFVzZXJ9IGZyb20gJy4uLy4uL21vZGVscyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYXBwJyxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgPGRpdiBjbGFzcz1cIm5hdmJhci1jb2xsYXBzZSBjb2xsYXBzZSBpbnZlcnNlXCIgaWQ9XCJuYXZiYXItaGVhZGVyXCI+XG4gICAgICBcdDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj5cbiAgICAgIFx0XHQ8ZGl2IGNsYXNzPVwiYWJvdXRcIj5cbiAgICAgIFx0XHRcdDxoND5BYm91dDwvaDQ+XG4gICAgICBcdFx0XHQ8cCBjbGFzcz1cInRleHQtbXV0ZWRcIj5cbiAgICAgIFx0XHRcdFx0VGhpcyBpcyB0aGUgQW5ndWxhciAyIHZlcnNpb24gb2YgdGhlIGNsYXNzaWMgQVNQLk5FVCBNVkMgTXVzaWMgc3RvcmUgcmV3cml0dGVuIHdpdGggQVNQLk5FVDUsIEFuZ3VsYXIgMiwgQm9vdFN0cmFwIDQgYW5kIHRoZSBTU1cgRW50ZXJwcmlzZSB3YXkuXG4gICAgICBcdFx0XHQ8L3A+XG4gICAgICBcdFx0PC9kaXY+XG4gICAgICBcdFx0PGRpdiBjbGFzcz1cIlwiPlxuICAgICAgXHRcdFx0PGg0PkNvbnRhY3Q8L2g0PlxuICAgICAgXHRcdFx0PHVsIGNsYXNzPVwibGlzdC11bnN0eWxlZFwiPlxuICAgICAgXHRcdFx0XHQ8bGk+PGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9TU1dDb25zdWx0aW5nL2FuZ3VsYXJtdXNpY3N0b3JlXCI+U1NXIEFuZ3VsYXIyIE11c2ljIFN0b3JlICZjb3B5OyA8L2E+PC9saT5cbiAgICAgIFx0XHRcdDwvdWw+XG4gICAgICBcdFx0PC9kaXY+XG4gICAgICBcdDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibmF2YmFyIG5hdmJhci1kYXJrIGJnLWludmVyc2UgbmF2YmFyLXN0YXRpYy10b3BcIj5cbiAgICAgIFx0PGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZFwiPlxuICAgICAgXHRcdDxidXR0b24gY2xhc3M9XCJuYXZiYXItdG9nZ2xlciBwdWxsLWxlZnRcIiB0eXBlPVwiYnV0dG9uXCIgZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiIGRhdGEtdGFyZ2V0PVwiI25hdmJhci1oZWFkZXJcIj5cbiAgICAgIFx0XHRcdCYjOTc3NjtcbiAgICAgIFx0XHQ8L2J1dHRvbj5cbiAgICAgIFx0XHQ8YSBbcm91dGVyLWxpbmtdPVwiWycvJyArIHJvdXRlcy5kYXNoYm9hcmQuYXNdXCIgY2xhc3M9XCJuYXZiYXItYnJhbmRcIj57e3RpdGxlfX08L2E+XG4gICAgICBcdFx0PHVsIGNsYXNzPVwibmF2IG5hdmJhci1uYXZcIj5cbiAgICAgIFx0XHRcdDxsaSBjbGFzcz1cIm5hdi1pdGVtXCI+XG4gICAgICBcdFx0XHRcdDxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj5cbiAgICAgIFx0XHRcdFx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBtZW51LWRyb3Bkb3duIGRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBhcmlhLWhhc3BvcHVwPVwidHJ1ZVwiIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiPlxuICAgICAgXHRcdFx0XHRcdFx0R2VucmVcbiAgICAgIFx0XHRcdFx0XHQ8L2J1dHRvbj5cbiAgICAgIFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPlxuICAgICAgXHRcdFx0XHRcdFx0PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCJcbiAgICAgIFx0XHRcdFx0XHRcdCAgIChjbGljayk9XCJnb1RvR2VucmUoZ2VucmUpXCJcbiAgICAgIFx0XHRcdFx0XHRcdCAgICpuZy1mb3I9XCIjZ2VucmUgb2YgZ2VucmVzXCI+XG4gICAgICBcdFx0XHRcdFx0XHRcdHt7Z2VucmUubmFtZX19XG4gICAgICBcdFx0XHRcdFx0XHQ8L2E+XG4gICAgICBcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiZHJvcGRvd24tZGl2aWRlclwiPjwvZGl2PlxuICAgICAgXHRcdFx0XHRcdFx0PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgW3JvdXRlci1saW5rXT1cIlsnLycgKyByb3V0ZXMuZ2VucmVzLmFzXVwiPkdlbnJlIExpc3Q8L2E+XG4gICAgICBcdFx0XHRcdFx0PC9kaXY+XG4gICAgICBcdFx0XHRcdDwvZGl2PlxuICAgICAgXHRcdFx0PC9saT5cbiAgICAgIFx0XHRcdDxsaSBjbGFzcz1cIm5hdi1pdGVtXCI+XG4gICAgICBcdFx0XHQ8YSBjbGFzcz1cIm5hdi1saW5rXCIgW2hpZGRlbl09XCIhdXNlclwiIFtyb3V0ZXItbGlua109XCJbJy8nICsgcm91dGVzLmdlbnJlcy5hc11cIj5DYXJ0PC9hPlxuICAgICAgXHRcdFx0PC9saT5cbiAgICAgIFx0XHRcdDxsaSBjbGFzcz1cIm5hdi1pdGVtIHB1bGwtcmlnaHRcIiBbaGlkZGVuXT1cInVzZXJcIj5cbiAgICAgIFx0XHRcdFx0PGEgY2xhc3M9XCJuYXYtbGlua1wiIChjbGljayk9XCJyZWdpc3RlcigpXCI+UmVnaXN0ZXI8L2E+XG4gICAgICBcdFx0XHQ8L2xpPlxuICAgICAgXHRcdFx0PGxpIGNsYXNzPVwibmF2LWl0ZW0gcHVsbC1yaWdodFwiPlxuICAgICAgXHRcdFx0XHQ8YSBjbGFzcz1cIm5hdi1saW5rXCIgIFtoaWRkZW5dPVwidXNlclwiIChjbGljayk9XCJsb2dpbigpXCI+TG9naW48L2E+XG4gICAgICBcdFx0XHQ8L2xpPlxuICAgICAgXHRcdFx0PGxpIGNsYXNzPVwibmF2LWl0ZW0gcHVsbC1yaWdodFwiIFtoaWRkZW5dPVwiIXVzZXJcIj5cbiAgICAgIFx0XHRcdFx0PGEgY2xhc3M9XCJuYXYtbGlua1wiICAoY2xpY2spPVwibG9nb3V0KClcIj5Mb2dvdXQ8L2E+XG4gICAgICBcdFx0XHQ8L2xpPlxuICAgICAgXHRcdFx0PGxpIGNsYXNzPVwibmF2LWl0ZW0gcHVsbC1yaWdodFwiIFtoaWRkZW5dPVwiIXVzZXJcIj5cbiAgICAgIFx0XHRcdFx0PGEgY2xhc3M9XCJuYXYtbGlua1wiID57e3VzZXIubmlja25hbWV9fTwvYT5cbiAgICAgIFx0XHRcdDwvbGk+XG4gICAgICBcdFx0XHQ8bGkgY2xhc3M9XCJuYXYtaXRlbSBwdWxsLXJpZ2h0XCIgIFtoaWRkZW5dPVwiIXVzZXJcIj5cbiAgICAgIFx0XHRcdFx0PGltZyBbc3JjXT1cInVzZXIucGljdHVyZVwiIGNsYXNzPVwiaW1nLXJlc3BvbnNpdmVcIiBoZWlnaHQ9XCIzNVwiIHdpZHRoPVwiMzVcIj5cbiAgICAgIFx0XHRcdDwvbGk+XG4gICAgICBcdFx0PC91bD5cbiAgICAgIFx0PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIFx0PHJvdXRlci1vdXRsZXQ+PC9yb3V0ZXItb3V0bGV0PlxuICAgICAgPGZvb3RlciBjbGFzcz1cInRleHQtbXV0ZWRcIj5cbiAgICAgIFx0PGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgXHRcdDxwIGNsYXNzPVwicHVsbC1yaWdodFwiPlxuICAgICAgXHRcdFx0PGEgaHJlZj1cIiNcIj5CYWNrIHRvIHRvcDwvYT5cbiAgICAgIFx0XHQ8L3A+XG4gICAgICBcdFx0PHA+PGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9TU1dDb25zdWx0aW5nL2FuZ3VsYXJtdXNpY3N0b3JlXCI+U1NXIEFuZ3VsYXIyIE11c2ljIFN0b3JlICZjb3B5OyA8L2E+PC9wPlxuICAgICAgXHQ8L2Rpdj5cbiAgICAgIDwvZm9vdGVyPlxuICAgIGAsXG4gICAgc3R5bGVzOiBbYFxuXG4gICAgICAuYnRuLWdyb3VwID4gLm1lbnUtZHJvcGRvd24ge1xuICAgICAgXHRiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIH1cbiAgICBgXSxcbiAgICBkaXJlY3RpdmVzOiBbUk9VVEVSX0RJUkVDVElWRVMsIENPUkVfRElSRUNUSVZFU11cbn0pXG5cbkBSb3V0ZUNvbmZpZyhBUFBfUk9VVEVTKVxuZXhwb3J0IGNsYXNzIEFwcENvbXBvbmVudCB7XG4gICAgcHVibGljIHRpdGxlID0gJ1NTVyBBbmd1bGFyIDIgTXVzaWMgU3RvcmUnO1xuICAgIHB1YmxpYyByb3V0ZXMgPSBSb3V0ZXM7XG4gICAgcHVibGljIGdlbnJlczogR2VucmVbXTtcbiAgICBwdWJsaWMgdXNlcjogVXNlcjtcblxuICAgIHByaXZhdGUgbG9jayA9IG5ldyBBdXRoMExvY2soJ2lrTWpPTGFuak9za2U2MjRmYUFqWWUwVmU3Y0FPZzMzJywgJ3Nzdy5hdS5hdXRoMC5jb20nKTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX2dlbnJlU2VydmljZTogR2VucmVTZXJ2aWNlLCBwcml2YXRlIF9yb3V0ZXI6IFJvdXRlcikge1xuICAgICAgICB0aGlzLmdldEdlbnJlcygpO1xuICAgICAgICB0aGlzLnNldFVzZXIoKTtcbiAgICB9XG5cbiAgICBzZXRVc2VyKCkge1xuICAgICAgICB0aGlzLnVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXIpO1xuICAgIH1cblxuICAgIGdldEdlbnJlcygpIHtcbiAgICAgICAgdGhpcy5nZW5yZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fZ2VucmVTZXJ2aWNlLmdldEdlbnJlcygpXG4gICAgICAgICAgICAudGhlbihnZW5yZXMgPT4gdGhpcy5nZW5yZXMgPSBnZW5yZXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5yZXM7XG4gICAgfVxuXG4gICAgZ29Ub0dlbnJlKGdlbnJlOiBHZW5yZSkge1xuICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoW2AvJHtSb3V0ZXMuZ2VucmUuYXN9YCwgeyBuYW1lOiBnZW5yZS5uYW1lIH1dKTtcbiAgICB9XG5cbiAgICBsb2dpbigpIHtcbiAgICAgICAgdGhpcy5sb2NrLnNob3coe1xuICAgICAgICAgICAgZm9jdXNJbnB1dDogZmFsc2UsXG4gICAgICAgICAgICBwb3B1cDogdHJ1ZSxcbiAgICAgICAgfSwgKGVyciwgcHJvZmlsZSwgdG9rZW4pID0+IHtcbiAgICAgICAgICAgIHRoaXMudXNlciA9IHByb2ZpbGU7XG4gICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmxvZygnbG9naW4gZXJyb3I6JywgZXJyKTtcbiAgICAgICAgICAgIGlmICh0b2tlbikgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2p3dCcsIHRva2VuKTtcbiAgICAgICAgICAgIGlmIChwcm9maWxlKSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHByb2ZpbGUpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXIoKSB7XG4gICAgICAgIC8vL2NhbGxiYWNrIGFuZCBlcnJvciBmdW5jdGlvblxuICAgICAgICAvLyBUT0RPIHJvdXRlIG9yIGxvZ2luIG9uIHJlZ2lzdGVyXG4gICAgICAgIHRoaXMubG9jay5zaG93U2lnbnVwKG51bGwsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKX0pO1xuICAgIH1cblxuICAgIGxvZ291dCgpIHtcbiAgICAgICAgdGhpcy51c2VyID0gbnVsbDtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2p3dCcpO1xuICAgICAgICAvL25lZWRlZCB0byBoaWRlIGltZyBpbiBtZW51IGFzIGhpZGRlbiBpcyBub3Qgd29ya2luZ1xuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9XG5cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==